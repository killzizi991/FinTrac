<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å - PWA –¥–ª—è —É—á–µ—Ç–∞ –¥–æ—Ö–æ–¥–æ–≤ –∏ —Ä–∞—Å—Ö–æ–¥–æ–≤">
    <title>–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å</title>
    <link rel="stylesheet" href="./assets/css/main.css">
    <link rel="stylesheet" href="./assets/css/calendar.css">
    <link rel="stylesheet" href="./assets/css/modals.css">
    <link rel="stylesheet" href="./assets/css/themes.css">
    <link rel="stylesheet" href="./assets/css/ui-components.css">
    <link rel="manifest" href="./manifest.json">
    <link rel="icon" type="image/x-icon" href="./assets/icons/icon-72x72.png">
    <meta name="theme-color" content="#2196f3">
</head>
<body class="light-theme">
    <div class="app-container">
        <header class="app-header">
            <div class="header-controls">
                <button id="prev-month" class="btn-icon" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–∏–π –º–µ—Å—è—Ü">‚Üê</button>
                <h1 id="current-month" class="month-title">–û–∫—Ç—è–±—Ä—å 2023</h1>
                <button id="next-month" class="btn-icon" aria-label="–°–ª–µ–¥—É—é—â–∏–π –º–µ—Å—è—Ü">‚Üí</button>
            </div>
            <div class="header-actions">
                <button id="theme-toggle" class="btn-icon" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">üåì</button>
                <button id="report-btn" class="btn" data-modal-type="report">–û—Ç—á–µ—Ç</button>
                <button id="categories-btn" class="btn" data-modal-type="category-manager">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</button>
                <button id="export-import-btn" class="btn" data-modal-type="export-import">–î–∞–Ω–Ω—ã–µ</button>
            </div>
        </header>

        <main class="main-content">
            <div class="calendar-container">
                <div class="calendar-weekdays">
                    <div class="weekday">–ü–Ω</div>
                    <div class="weekday">–í—Ç</div>
                    <div class="weekday">–°—Ä</div>
                    <div class="weekday">–ß—Ç</div>
                    <div class="weekday">–ü—Ç</div>
                    <div class="weekday">–°–±</div>
                    <div class="weekday">–í—Å</div>
                </div>
                <div id="calendar-grid" class="calendar-grid">
                    <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è -->
                </div>
            </div>

            <div class="summary-bar">
                <div class="summary-item">
                    <span class="summary-label">–î–æ—Ö–æ–¥—ã:</span>
                    <span id="total-income" class="summary-amount income">0 ‚ÇΩ</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">–†–∞—Å—Ö–æ–¥—ã:</span>
                    <span id="total-expense" class="summary-amount expense">0 ‚ÇΩ</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">–ë–∞–ª–∞–Ω—Å:</span>
                    <span id="total-balance" class="summary-amount balance">0 ‚ÇΩ</span>
                </div>
            </div>
        </main>

        <div class="modal-overlay" id="modal-overlay"></div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–ø–µ—Ä–∞—Ü–∏–π –∑–∞ –¥–µ–Ω—å -->
        <div class="modal" id="day-operations-modal" data-modal-type="day-operations">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="day-modal-title">–û–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞ 15.10.23</h2>
                    <button class="btn-close" data-modal-close>√ó</button>
                </div>
                <div class="modal-body">
                    <div class="operations-sections">
                        <section class="operations-section">
                            <h3>–î–æ—Ö–æ–¥—ã</h3>
                            <div id="income-categories" class="categories-list">
                                <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è -->
                            </div>
                        </section>
                        <section class="operations-section">
                            <h3>–†–∞—Å—Ö–æ–¥—ã</h3>
                            <div id="expense-categories" class="categories-list">
                                <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è -->
                            </div>
                        </section>
                    </div>
                    <div class="day-operations-list">
                        <h3>–î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</h3>
                        <div id="day-operations-container" class="operations-container">
                            <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏ -->
        <div class="modal" id="add-operation-modal" data-modal-type="add-operation">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="add-operation-title">–î–æ–±–∞–≤–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é</h2>
                    <button class="btn-close" data-modal-close>√ó</button>
                </div>
                <div class="modal-body">
                    <form id="add-operation-form">
                        <input type="hidden" id="operation-date">
                        <input type="hidden" id="operation-type">
                        <input type="hidden" id="operation-category">
                        
                        <div class="form-group">
                            <label for="operation-amount">–°—É–º–º–∞ (‚ÇΩ)</label>
                            <input type="number" id="operation-amount" required min="0" step="0.01">
                        </div>
                        
                        <div class="form-group">
                            <label for="operation-description">–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                            <textarea id="operation-description" rows="3"></textarea>
                        </div>
                        
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" data-modal-close>–û—Ç–º–µ–Ω–∞</button>
                            <button type="submit" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ -->
        <div class="modal" id="category-manager-modal" data-modal-type="category-manager">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏</h2>
                    <button class="btn-close" data-modal-close>√ó</button>
                </div>
                <div class="modal-body">
                    <div class="categories-management">
                        <div class="category-type-section">
                            <h3>–î–æ—Ö–æ–¥—ã</h3>
                            <div id="income-categories-list" class="categories-editable-list">
                                <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è -->
                            </div>
                            <form id="add-income-category-form" class="add-category-form">
                                <input type="text" id="new-income-category" placeholder="–ù–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è –¥–æ—Ö–æ–¥–∞" required>
                                <button type="submit" class="btn btn-small">+</button>
                            </form>
                        </div>
                        
                        <div class="category-type-section">
                            <h3>–†–∞—Å—Ö–æ–¥—ã</h3>
                            <div id="expense-categories-list" class="categories-editable-list">
                                <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è -->
                            </div>
                            <form id="add-expense-category-form" class="add-category-form">
                                <input type="text" id="new-expense-category" placeholder="–ù–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è —Ä–∞—Å—Ö–æ–¥–∞" required>
                                <button type="submit" class="btn btn-small">+</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ—Ç—á–µ—Ç–∞ -->
        <div class="modal" id="report-modal" data-modal-type="report">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>–û—Ç—á–µ—Ç –∑–∞ –º–µ—Å—è—Ü</h2>
                    <button class="btn-close" data-modal-close>√ó</button>
                </div>
                <div class="modal-body">
                    <div class="report-content">
                        <div class="report-summary">
                            <div class="report-summary-item">
                                <span>–û–±—â–∏–π –¥–æ—Ö–æ–¥:</span>
                                <span id="report-total-income" class="income">0 ‚ÇΩ</span>
                            </div>
                            <div class="report-summary-item">
                                <span>–û–±—â–∏–π —Ä–∞—Å—Ö–æ–¥:</span>
                                <span id="report-total-expense" class="expense">0 ‚ÇΩ</span>
                            </div>
                            <div class="report-summary-item">
                                <span>–ë–∞–ª–∞–Ω—Å:</span>
                                <span id="report-balance" class="balance">0 ‚ÇΩ</span>
                            </div>
                        </div>
                        
                        <div class="report-categories">
                            <div class="report-category-type">
                                <h3>–î–æ—Ö–æ–¥—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</h3>
                                <div id="report-income-categories" class="categories-report">
                                    <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è -->
                                </div>
                            </div>
                            <div class="report-category-type">
                                <h3>–†–∞—Å—Ö–æ–¥—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</h3>
                                <div id="report-expense-categories" class="categories-report">
                                    <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è -->
                                </div>
                            </div>
                        </div>
                        
                        <div class="report-comparison">
                            <h3>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º –º–µ—Å—è—Ü–µ–º</h3>
                            <div id="month-comparison">
                                <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∞/–∏–º–ø–æ—Ä—Ç–∞ -->
        <div class="modal" id="export-import-modal" data-modal-type="export-import">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏</h2>
                    <button class="btn-close" data-modal-close>√ó</button>
                </div>
                <div class="modal-body">
                    <div class="data-management">
                        <div class="export-section">
                            <h3>–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</h3>
                            <div class="export-actions">
                                <button id="export-download-btn" class="btn">–°–∫–∞—á–∞—Ç—å JSON</button>
                                <button id="export-copy-btn" class="btn">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å JSON</button>
                            </div>
                            <div class="export-preview">
                                <label for="export-json-text">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä:</label>
                                <textarea id="export-json-text" readonly rows="6"></textarea>
                            </div>
                        </div>
                        
                        <div class="import-section">
                            <h3>–ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</h3>
                            <div class="import-actions">
                                <div class="file-input-container">
                                    <input type="file" id="import-file-input" accept=".json">
                                    <label for="import-file-input" class="btn">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª</label>
                                </div>
                                <button id="import-paste-btn" class="btn">–í—Å—Ç–∞–≤–∏—Ç—å JSON</button>
                            </div>
                            <div class="import-preview">
                                <label for="import-json-text">–í—Å—Ç–∞–≤—å—Ç–µ JSON –¥–∞–Ω–Ω—ã–µ:</label>
                                <textarea id="import-json-text" rows="6" placeholder='{"settings": {...}, "operations": [...]}'></textarea>
                            </div>
                            <button id="import-submit-btn" class="btn btn-danger">–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å (–∑–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ)</button>
                        </div>
                        
                        <div class="clear-section">
                            <h3>–û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö</h3>
                            <button id="clear-data-btn" class="btn btn-danger">–ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è -->
        <div class="modal" id="confirm-modal" data-modal-type="confirm">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="confirm-title">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</h2>
                    <button class="btn-close" data-modal-close>√ó</button>
                </div>
                <div class="modal-body">
                    <p id="confirm-message">–í—ã —É–≤–µ—Ä–µ–Ω—ã?</p>
                    <div class="confirm-actions">
                        <button id="confirm-cancel" class="btn btn-secondary" data-modal-close>–û—Ç–º–µ–Ω–∞</button>
                        <button id="confirm-ok" class="btn btn-danger">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
        <div id="notification" class="notification"></div>
    </div>

    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script src="./assets/js/core/constants.js"></script>
    <script src="./assets/js/core/utils.js"></script>
    <script src="./assets/js/core/state.js"></script>
    <script src="./assets/js/modules/data-manager.js"></script>
    <script src="./assets/js/ui/modal-manager.js"></script>
    <script src="./assets/js/modules/calendar.js"></script>
    <script src="./assets/js/modules/operations.js"></script>
    <script src="./assets/js/modules/categories.js"></script>
    <script src="./assets/js/modules/reports.js"></script>
    <script src="./assets/js/modules/export-import.js"></script>
    <script src="./assets/js/ui/theme-switcher.js"></script>
    <script src="./assets/js/ui/notifications.js"></script>
    <script src="./assets/js/ui/header-controls.js"></script>
    <script src="./assets/js/pwa/sw-register.js"></script>
    <script src="./assets/js/core/app.js"></script>
</body>
</html>